
<head>

  <!-- META
  ------------------------- -->
    <title>Go with a Flow</title>
    <meta name="description" content="">

  <!-- Mobile Specific Metas
  ------------------------- -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- FONT
  ------------------------- -->


  <!-- CSS
  ------------------------- -->
  <link rel="stylesheet" type="text/css" href="../assets/css/normalize.css?v=cf98cc04e0">
  <link rel="stylesheet" type="text/css" href="../assets/css/skeleton.css?v=cf98cc04e0">
  <link rel="stylesheet" type="text/css" href="../assets/css/custom.css?v=cf98cc04e0">
  <link rel="stylesheet" type="text/css" href="../assets/css/font-awesome.min.css?v=cf98cc04e0">

  <!-- JS
  ------------------------- -->



  <!-- FAVICON
  ------------------------- -->
  <link rel="shortcut icon" href="../assets/images/favicon.ico?v=cf98cc04e0">

  <link rel="canonical" href="index.html">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <link rel="amphtml" href="amp/index.html">
    
    <meta property="og:site_name" content="The Abyss">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Go with a Flow">
    <meta property="og:description" content="You've heard about Flow, but not sure what it is, how to use it and whether it's worth it? I had to fins answers to this questions so hopefully you don't have to. I've started with Flow as a contributor to already an established project with extensive (and ever growing)">
    <meta property="og:url" content="http://localhost:2368/go-with-a-flow/">
    <meta property="article:published_time" content="2017-01-18T21:26:09.000Z">
    <meta property="article:modified_time" content="2017-01-20T14:33:20.000Z">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Go with a Flow">
    <meta name="twitter:description" content="You've heard about Flow, but not sure what it is, how to use it and whether it's worth it? I had to fins answers to this questions so hopefully you don't have to. I've started with Flow as a contributor to already an established project with extensive (and ever growing)">
    <meta name="twitter:url" content="http://localhost:2368/go-with-a-flow/">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="Elvina Valieva">
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "The Abyss",
        "logo": "https://pp.vk.me/c625817/v625817374/148d4/EZjN7NKLiDA.jpg"
    },
    "author": {
        "@type": "Person",
        "name": "Elvina Valieva",
        "image": {
            "@type": "ImageObject",
            "url": "http://localhost:2368/content/images/2016/12/IMG_0011.JPG",
            "width": 396,
            "height": 396
        },
        "url": "http://localhost:2368/author/elvina/",
        "sameAs": [],
        "description": "Life is more than books, you know, but not much more"
    },
    "headline": "Go with a Flow",
    "url": "http://localhost:2368/go-with-a-flow/",
    "datePublished": "2017-01-18T21:26:09.000Z",
    "dateModified": "2017-01-20T14:33:20.000Z",
    "description": "You&#x27;ve heard about Flow, but not sure what it is, how to use it and whether it&#x27;s worth it? I had to fins answers to this questions so hopefully you don&#x27;t have to. I&#x27;ve started with Flow as a contributor to already an established project with extensive (and ever growing)",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://localhost:2368"
    }
}
    </script>

    <meta name="generator" content="Ghost 0.11">
    <link rel="alternate" type="application/rss+xml" title="The Abyss" href="../rss/index.html">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/0.0.1/prism.min.css" rel="stylesheet">
  </head>

  <!-- BODY
  ------------------------- -->

  <body class="post-template nav-closed">


		<div class="container">

			
  <section class="header">
      <h1 class="title">The Abyss</h1>
  </section>
  
      <div class="navbar-spacer"></div>
    <nav class="navbar">
      <div class="container">
        <ul class="navbar-list">
          <li class="navbar-item"><a class="navbar-link" href="../">Home</a></li>
          <li class="navbar-item"><a class="navbar-link" href="../reading/">Reading</a></li>
          <li class="navbar-item"><a class="navbar-link" href="../about/">About</a></li>
        </ul>
      </div>
    </nav>
  </div>

  
  
  <div class="container">
  <br><br>
      <h2>Go with a Flow</h2>
	  <section class="post-meta">
        <time class="post-date" datetime="2017-01-18">18 January 2017</time>
      </section>
  </div>
  
  <div class="container">
  <p>You've heard about Flow, but not sure what it is, how to use it and whether it's worth it? I had to fins answers to this questions so hopefully you don't have to. I've started with Flow as a contributor to already an established project with extensive (and ever growing) Flow coverage. It was a stark contrast to how JavaScript's usual treatment of types, in fact it seemed formalistic and unnecessarily specific at times. However, just like with writing tests, well type-annotated code will take care of itself and let you know about a problem <em>before</em> things went wrong.</p>

<h3 id="whyuseflow">Why use Flow?</h3>

<p><a href="https://flowtype.org">Flow</a> allows strict typing in JavaScript. That is really not at all helpful, so I'll try again. Lets look at the following code. </p>

<pre><code class="language-javascript">var foo = 0; //here is a number  
var bar = '0'; //here is a string  
foo == bar //true but why?  
foo === bar //false as it should be  
</code></pre>

<p>So why exactly <code>==</code> equates values of two very different types? It happens because of a concept called <em>coercion</em>. When using <code>==</code> we ask JS to compare values but not type so types are converted in case they don't match, <code>===</code> on the other hand compares both values and types. That's what coercion is. Of course we may want values to be converted into different type, that is a so-called explicit coercion.</p>

<pre><code class="language-javascript">var wasNumber = 42;  
var nowString = number.toString();  
nowString //'42'  
</code></pre>

<p>Let's take a look at implicit coercion in action.</p>

<pre><code class="language-javascript">var x = 2; //totally a number  
var y = '2'; //not a number  
van z = x*y;  
z // prints 4... wait what?  
</code></pre>

<p>So this kind of things can sneak up on you and they are a real pain to debug. Javascript is <em>dynamically typed</em> language which we can define as a language that will let you know that <code>'X' is not a function</code> only when the program is running (or <em>runtime</em>). But this is not true for every programming language. Some of the languages check type <em>statically</em> or during <em>compile time</em>, which means before the program is run.</p>

<p>So Flow exists to allow static type checking in Javascript, it checks type as you work on the project. The least invasive way to use Flow is to allow Flow to use <em>type inference</em> (automatic deduction of data type based on language syntax etc). You can also choose to be very specific about each variable, function argument and returned type. This of course depends on the project and your own approach to development. </p>

<p>Static type checking is not inherently better than dynamic one, in fact there are a lot of opinions about those two.  You may want to read <a href="https://medium.com/@preethikasireddy/why-use-static-types-in-javascript-part-2-part-3-be699ee7be60#.54u3hgr3d">this post</a> if you still not sure whether you need to learn Flow.</p>

<h3 id="howtostart">How to start?</h3>

<p>Like this <code>\\@flow</code>. Just add this comment at the top of the file after <a href="https://flowtype.org/docs/getting-started.html#_">installing</a> and that's it. Use <code>/* @flow weak */</code> if you only want to be notified about mismatch and don't want to work on type annotation or if you have existing code base, which you want to gradually refactor using Flow. <br>
You can decide between periodically running <code>flow check</code> from console and starting a <a href="https://flowtype.org/docs/new-project.html#using-the-flow-server">server</a>, which will watch changes in your source files and will detect any errors and inconsistent type usage.</p>

<h3 id="syntaxintro">Syntax Intro</h3>

<p>While the flexibility is a strength of Flow, one of it's most obvious weaknesses is far from ideal docs. I refer to this detailed <a href="https://medium.freecodecamp.com/why-use-static-types-in-javascript-part-1-8382da1e0adb#.ax9so8iyn">post</a> in case you want an in depth information about flow syntax. For now let's start with js primitive types using a cat as an example.</p>

<pre><code class="language-javascript">var name: string = 'Fluffy';  
var age: number = 3;  
var likesDogs: boolean = false;  
var currentThoughts: void = undefined;  
var likesRoomba: null = null;  
var foodPreferences: any = 'tuna';  
</code></pre>

<p>First thing you may notice is that despite <code>undefined === null</code> Flow separates those two types. Apart from that this syntax seems easily readable. <code>any</code> type basiacally means Flow will skip checking this variable, which may be a very good thing or a very bad thing, so it should be used with caution. <br>
Now let's move to arrays, which flows describes as types of array elements like <code>Array&lt;type&gt;</code></p>

<pre><code class="language-javascript">var favouriteToys: Array&lt;string&gt; = ['mouse', 'birdie', 'socks', 'human toes'];  
//alternative syntax
var favouriteStarTrekTNGCharacters: string[] = ['Spot'];  
</code></pre>

<p>Object types can be defined both very loosely and very detailed.</p>

<pre><code class="language-javascript">vat obj: Object = {};  
let cat: {name: string, age: number, likesDogs: boolean} = {name: 'Fluffy', age: 3, likesDogs: false};  
//object can be a registry of all cats in the neighbourhood
let catRating: {[name:string]: number} = {};  
catRating["Fluffy"] = 10;  
//Fluffy is a solid ten
</code></pre>

<p>The most interesting and complicated syntax concerns functions. </p>

<pre><code class="language-javascript">var aFunction: Function = () =&gt; {console.log('called');};  
</code></pre>

<p>Function is of course a type in Flow, but Flow is smart enough to find out what is a function by itself. You can annotate function very specifically, including arguments and returning type.</p>

<pre><code class="language-javascript">function sum(a: number, b: number): number {  
  return a+b;
}

async function asyncEquate(  
  remoteNumber: Promise&lt;number[]&gt;,
  localNumber: number,
): Promise&lt;boolean&gt; {
  var firstNumber = await remoteNumber;
  return firstNumber === localNumber;
}
</code></pre>

<p>Flow allows you to define your own types, and it is the most powerful feature, which can become a way for contributors to easily grasp how things work in you project.</p>

<pre><code class="language-javascript">type Cat = {  
  name: string,
  age: number,
  likesDogs: boolean,
};

function addCat(  
  {
   name, age, likesDogs = false,
  }: Cat
): void {
  ...
}
</code></pre>

<p>In this example function only accepts this type as an argument and one of the parameters has a default value. Types can be strict this way only object structured certain way would be accepted</p>

<pre><code class="language-javascript">type Cat = {|  
  name: string,
  age: number,
  likesDogs: boolean,
|};
//note the use of '|'

addCat({  
  name: 'Spot',
  age: 5,
  likesDogs: true,
  furColor: 'black and white',
});
//This will cause an error
</code></pre>

<p>Last cool thing you need to know is how to make Flow more flexible with <strong>maybe</strong> types and <strong>disjointed unions</strong></p>

<pre><code class="language-javascript">type Cat = {|  
  name: ?string, //only house cats have names
  age: ?number, //cats rarely remember their birthdays
  likesDogs: boolean,
|};

addCat({  
  name: null,
  age: null,
  likesDogs: false,
});
//maybe values can be either a declared type or a null
</code></pre>

<p>Now lets make <code>addCat</code> accept more than one type as an argument.</p>

<pre><code class="language-javascript">function addCat(  
  {
   name, age, likesDogs = false,
  }: Cat | Array&lt;Cat&gt; 
): void {
  ...
}

addCat(  
  [{
    name: null, age: null, likesDogs: false,
  }, {
    name: 'Sylvester', age: 1, likesDogs: true,
  }]
);
//'|' (pipe) means more than one type is viable
</code></pre>

<p>You can find more detailed examples for classes, mixed types etc in the <a href="https://flowtype.org/docs/quick-reference.html">docs</a>. That's it for now, next I am going to explain how to check how read Flow error and how and why to increase Flow coverage in your project.</p>
  </div>
  <div class="container">
		<div class="post-spacer"></div>
		<div class="row">
			<div class="six columns">
				<section class="post-tags">
					
				</section>
			</div>
			<div class="six columns">
				<section class="post-share">
					<a class="link twitter" href="http://twitter.com/share?text=Go%20with%20a%20Flow&amp;url=http://localhost:2368/go-with-a-flow/"><i class="fa fa-twitter"></i></a>
					<a class="link facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:2368/go-with-a-flow/"><i class="fa fa-facebook"></i></a>
					<a class="link reddit" href="http://www.reddit.com/submit?url=http://localhost:2368/go-with-a-flow/"><i class="fa fa-reddit"></i></a>
					<a class="link hackernews" href="http://news.ycombinator.com/submitlink?u=http://localhost:2368/go-with-a-flow/"><i class="fa fa-hacker-news"></i></a>          
				</section>
			</div>
  <br><br>
		<div class="row">
			<div class="two columns">
			<img class="authorimage" src="../content/images/2016/12/IMG_0011.JPG">
			</div>
			<div class="four columns">
			<h4><span class="author-name"><a href="../author/elvina/">Elvina Valieva</a></span></h4>
			<span class="author-location"><i class="fa fa-map-marker"></i> Marburg</span> | <span class="website"><a href="index.html"></a></span>
			</div>
			<div class="six columns">
			<br><p>Life is more than books, you know, but not much more</p>
			</div>
		</div>
  <div class="post-spacer"></div><br>
  <aside class="read-next">
  <div class="row">
	<div class="six columns">
	</div>
	<div class="six columns">
    <a class="read-next-story prev " style="background-image: url(../content/images/2017/01/33C3-hello.png)" href="../notes-from-33c3/">
        <section class="post">
            <h4>Notes from 33C3</h4>
            <p>In case you don't know Chaos Computer Congress is the biggest thing. It's THE THING. In fact there are…</p>
        </section>
    </a>
	</div>
</div>
</aside>






      <div class="container">
        <footer id="footer" class="twelve columns">
		<br>
		 <br>
         <section class="copyright"><a href="../">The Abyss</a> <span style="font-size: .8em; font-weight: 600;"><a href="https://creativecommons.org/licenses/by-nc-sa/2.0/">CC BY-NC-SA</a></span> 2017</section>
		 <br>
		 <br>
        </footer>
      </div> <!-- end footer div.container -->
    </div>  <!-- end footer div.table-block -->

  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/0.0.1/prism.min.js"></script>
</div></body>
